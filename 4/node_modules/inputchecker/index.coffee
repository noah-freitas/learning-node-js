util = require 'util'
eventEmitter = require('events').EventEmitter
fs = require 'fs'

class inputChecker extends eventEmitter
  constructor: (@name, file) ->
    @writeStream = fs.createWriteStream './' + file + '.txt',
      flags: 'a'
      encoding: 'utf8'
      mode: 0666

  check: (input) ->
    command = input.toString().trim().substr 0, 3
    switch command
      when 'wr:' then @emit 'write', input.substr 3, input.length
      when 'en:' then @emit 'end'
      else @emit 'echo', input

exports.inputChecker = inputChecker
